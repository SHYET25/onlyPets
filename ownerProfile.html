<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="icon" href="media/images/utilities/paw.png" type="image/png">

    <!-- BS LINKS -->
    <!-- <link rel="stylesheet" href="../../bsCSS/bootstrap.css">
    <link rel="stylesheet" href="../../bsCSS/bootstrap.min.css"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    

    <!-- Font Awesome Link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <!-- Page CSS and JS -->
    <link rel="stylesheet" href="cssFile/userSide/ownerProfile.css">

    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
</head>
    <style>
   

        *::-webkit-scrollbar {
            width: 8px;
        }
        *::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        *::-webkit-scrollbar-thumb {
            background-color: #cccccc;
            border-radius: 10px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #38b6ff;
            margin: 0;
            padding: 0;
            font-family: helvetica, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Navbar Styles */
        .navbar {
            background-color: transparent;
            color: white;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            padding: 1rem 0.3rem;
        }

        .navbar .navbar-brand img {
            height: 50px;
            width: 65%;
            margin-left: 30px;
        }

        .navbar .nav-item .nav-link {
            color: white;
            font-size: 16px;
            font-weight: 500;
            transition: color 0.3s;
            margin-right: 10px;
        }

        .navbar .nav-item .nav-link:hover {
            color: #f3f3f3;
        }

        .navbar .form-control {
            border-radius: 20px;
            display: none; /* Initially hidden */
        }

        .navbar .search-icon {
            font-size: 2rem; /* Increased size */
            cursor: pointer;
            color: black;
        }

        .navbar .search-icon:hover {
            color: #f3f3f3;
        }

        .navbar .form-control.show {
            display: block; /* Show input when the icon is clicked */
        }

        /* Add equal margin between icons */
        .navbar .nav-link {
            margin-left: 15px;
          
        }

        
        /* Add equal margin between icons except the last child */
        .navbar .d-flex i {
            font-size: 2rem; /* Increase icon size */
            margin-left: 15px; /* Equal margin between icons */
            margin-left: 15px; /* Equal margin between icons */
            cursor: pointer;
            color: black;
            transition: color 0.3s;
        }
        
        /* Hover effect for icons */
        .navbar .d-flex i:hover {
            color: #f3f3f3;
        }

        #chatDropdown {
            display: none;
            position: absolute;
            top: 80px;
            right: 100px;
            background: #fff;
            box-shadow: 0 8px 32px rgba(56,182,255,0.15), 0 1.5px 8px rgba(0,0,0,0.08);
            border-radius: 18px;
            width: 370px;
            max-height: 500px;
            overflow-y: auto;
            padding: 0;
            z-index: 1050;
            border: none;
        }

        .chat-message {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 18px;
            border-bottom: 1px solid #f1f1f1;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
            background: transparent;
            position: relative;
        }
        
        .chat-message:last-child {
            border-bottom: none;
        }
        
        .chat-message:hover {
            background: #eaf6ff;
            box-shadow: 0 2px 8px rgba(56,182,255,0.08);
        }
        
        .profile-img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #38b6ff22;
            background: #f3f3f3;
        }
        
        .message-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 2px;
            min-width: 0;
        }
        
        .name {
            font-weight: 700;
            color: #1976d2;
            font-size: 1.05rem;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .message {
            color: #555;
            font-size: 0.97rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 180px;
        }
        
        .time {
            font-size: 0.85rem;
            color: #aaa;
            align-self: flex-end;
            margin-top: 2px;
        }
        
        /* Hover effect for messages */
        .chat-message:hover {
            background-color: #f9f9f9;
            cursor: pointer;
        }
        
        #chatDropdown::-webkit-scrollbar {
            width: 6px;
        }
        
        #chatDropdown::-webkit-scrollbar-thumb {
            background-color: #ddd;
            border-radius: 3px;
        }
        
        #chatDropdown::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }

        #bellDropdown {
            display: none;
            position: absolute;
            top: 80px;
            right: 30px;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            width: 400px; /* Adjusted width for better visibility */
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            z-index: 1000;
            transition: opacity 0.3s ease;
        }
        
        .notification-message {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-start;
            padding: 5px;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .notification-message:last-child {
            border-bottom: none;
        }
        
        .profile-img {
            width: 45px; /* Adjusted size for better proportion */
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .notification-details {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        
        .name {
            font-weight: 600;
            font-size: 14px;
            color: #333;
            margin-bottom: 3px;
        }
        
        .notification {
            font-size: 13px;
            color: #555;
            line-height: 1.4;
            margin-bottom: 5px;
        }
        
        .time {
            font-size: 11px;
            color: #aaa;
            align-self: flex-end;
        }
        
        .notification-message:hover {
            background-color: #f9f9f9;
            cursor: pointer;
        }
        
        #bellDropdown::-webkit-scrollbar {
            width: 6px;
        }
        
        #bellDropdown::-webkit-scrollbar-thumb {
            background-color: #ddd;
            border-radius: 3px;
        }
        
        #bellDropdown::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }
    
        /* Sidebar Styling */
        .sidebar {
            height: calc(100% - 100px);
            width: 80px;
            position: fixed;
            top: 54%;
            left: 30px;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Space between top links and bottom icon */
            align-items: center; /* Center items horizontally */
            padding-top: 10px;
            padding-bottom: 10px;
            margin-top: 10px;
        }
        
        .sidebar a {
            margin-bottom: 10px; /* Adjust spacing between top links */
            text-decoration: none;
            font-size: 2rem;
            color: #333333;
            display: block;
            transition: 0.3s;
        }
        .petList5 {
            font-weight: 900;
            background-color: #38b6ff;
            padding: 10px;
            width: 100%;
            border-radius: 10px;
           
        }

        .petList5 h5{
            font-weight: 900;
            background-color: #38b6ff;
           
        }
        
        .sidebar a:hover {
            color: #ffff;
        }

            /* Make the icon's background red and circular when active */
        .sidebar .top-links a .active {
            background-color: #38b6ff;
            border-radius: 50%;
            color: #000; /* Change icon color to white */
            padding: 10px; /* Add some padding for the circular effect */
        }

        .sidebar .top-links a i {
            transition: all 0.3s ease; /* Smooth transition for background color and size */
        }

        /* Hover effect for icons */
        .sidebar .top-links a:hover .active {
            background-color: #38b6ff;
            color: white;
        }

        /* Ensure the inactive state doesn't have the circle background */
        .sidebar .top-links a i {
            background: none;
            border-radius: 0;
        }

        .sidebar .top-links a .deactive {
            background-color: transparent;
            border-radius: 50%;
            color: #000; /* Change icon color to white */
            padding: 10px; /* Add some padding for the circular effect */
            font-size: 2rem;
        }

        /* Hover effect for icons */
        .sidebar .top-links a:hover .deactive {
            background-color: transparent;
            color: white;
            font-size: 2rem;
        }



        
        .sidebar .bottom-icon {
            margin-bottom: 10px; /* Keep space from the bottom of the sidebar */
            color: #333333;
            font-size: 2rem;
            transition: 0.3s;
        }
        
        .sidebar .bottom-icon:hover {
            color: #ffffff;
        }

        .top-links a {
            /* No margin applied here so the first child stays at the top */
            padding-top: 20px;
        }
        
        .top-links a:not(:first-child) {
            margin-top: 20px; /* Add margin only to links except the first one */
        }
        
        
        

        /* Main content area */
        #main {
            background-color: #38b6ff;
            background-image: url('media/images/utilities/bgMain.png'); /* Update this line */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 100%;
            overflow-x: hidden;
            padding-top: 10vh;
        }
        

        .active {
            color: white;
        }

        #imageModal{
            z-index: 10000;
        }

        #loadingScreen {
            display: none; /* Initially hidden */
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
            z-index: 10000; /* Ensure it's above other content */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #loadingScreen img {
            width: 300px; /* Adjust size as needed */
            height: 400px; /* Adjust size as needed */
        }

        /* Responsive Table */
        .table-responsive {
            overflow-x: auto;
        }

        .active {
            color:white;
        }

        hr{
            color:gray;
            
        }

        .contentType{
            margin-left: 0px;
        }

        .contentTypeButtonDeactive {
            margin-left: 100px;
            background-color: transparent;
            border-radius: 25px;
            width: 150px;
            font-weight: 900;
        }

        .contentTypeButtonActive {
            margin-left: 100px;
            background-color: #ffde59;
            border-radius: 25px;
            width: 150px;
            font-weight: 900;
        }

        .contentTypeButtonActive:hover {
            margin-left: 100px;
            background-color: #9c7d00;
            border-radius: 25px;
            width: 150px;
            font-weight: 900;
        }

        #main {
            background-color: #38b6ff;
            background-image: url('media/images/utilities/bgMain.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 100%;
            overflow-x: hidden;
            overflow-y: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 80%;
            margin-top: 30px;
        }

        .hidden {
            display: none;
        }


        #publicContainer, #personalizedContainer {
       
            height: 100%;
            overflow: hidden;
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
            padding: 10px;
            
        }

       #personalizedContainer:hover {
            overflow-y: auto; /* Add scroll if content overflows */
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
            
        }

        #publicContainer:hover {
            overflow: auto; /* Add scroll if content overflows */
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
            
        }

        #rightContent {
       
            height: 100%; /* Match height with the main section */
            overflow-y: auto; /* Add scroll if content overflows */
            padding: 10px;
        }

        

        #centerContent {
       
            height: 100%; /* Match height with the main section */
            padding: 0%;
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
            overflow: hidden;
            padding: 10px;
        }

        

        
        
        
        .mainContent{
        
            height: 100%;
            margin-top: 0.5%;
            width: 100%;
        }

        #postComposer {
            width: 100%; /* Default width in "public" */
            height: 60px; /* Collapsed height */
            overflow: hidden; /* Hide content when collapsed */
            transition: height 0.6s ease; /* Smooth transition for height */
            border-radius: 15px;
            text-align: center;
            background-color: #85d2ff;
            border-color: #85d2ff;
        }

        #petMateList {
            width: 100%; /* Default width in "public" */
            margin-top: 10px;
            height: 63%; /* Collapsed height */
            overflow: hidden;
            border-radius: 15px;
            text-align: center;
            background-color: #85d2ff;
            border-color: #85d2ff;
        }

        .petListH5 {
            font-weight: 900;
            background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
            padding: 12px 0;
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(56,182,255,0.08);
            letter-spacing: 1px;
            font-size: 1.2rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.07);
            margin-bottom: 0;
            border-bottom: 2px solid #38b6ff33;
            text-align: center;
           
        }

        .petListH5 h5{
            font-weight: 900;
           
        }

        #postComposer h5{
           font-weight: 900;
        }

        

        .petCollection {
            height: 100%;
           
            scrollbar-gutter: stable; 
            overflow: hidden;
        }

        .petCollection:hover {
            overflow: auto;
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
            height: 100%;
        }


        
        #postComposer:hover {
            height: 27%; /* Expand to a fixed height on hover */
        }
        
        /* Add this fallback to ensure consistent behavior */
        #postComposer:focus,
        #postComposer:active {
            width: 100%; /* Maintain 100% width if focused or active */
            height: 220px; /* Set height to same as hover to maintain consistency */
        }

        .pet-img, .friend-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        #petList{
            margin-top: 10px;
        }

        .pet-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .pet-img-profile {
            width: 90%;
            height: 90%;
            border-radius: 50%;
            object-fit: cover;
            margin-left: 3px;
        }


        .pet-item:hover {
            background-color: #f1f1f1;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        .pet-item {
            
            
            padding: 10px;
        }
        
        
        .pet-item img {
            border: 2px solid #007bff;
        }

        .pet-item-profile img{
            border: 4px solid #007bff;
        }

        .pet-name {
            flex: 1; /* Ensures the name stays on the leftmost side */
            text-align: left; /* Align text to the left */
        }
        
        

        .product-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .product-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .product-card-img-top {
            height: 180px;
            object-fit: cover;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }
        
        .product-card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .product-card-text {
            font-size: 1rem;
            color: #28a745;
        }
        
        #customerChats {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-top: 10px;
            height: 35%;
        }
        
        .chat-item:hover {
            background-color: #f1f1f1;
            cursor: pointer;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }
        
        .chat-item img {
            border: 2px solid #007bff;
        }

        #cartIcon {
            margin-right: 20px;
        }
        
        #sellItem {
            margin-top: 10px;
            border-radius: 15px;
        }
        
        #postButton {
            font-weight: 700;
        }

        #chatList {
            overflow: hidden;
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
        }


        #chatList:hover {
            overflow-y: auto; /* Add scroll if content overflows */
            scrollbar-gutter: stable; /* Prevent scrollbar shift */
            
        }

        .select2-container--default .select2-selection--single {
            height: 38px;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            border-radius: 0.375rem;
            border: 1px solid #ced4da;
            background-color: #fff;
            box-shadow: none;
            transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
            display: flex;
            align-items: center;
        }
        .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 38px;
        }
        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 38px;
        }

        /* Add Pet Modal Custom Design */
        #addPetModal .modal-content {
            border-radius: 18px;
            background: linear-gradient(135deg, #e3f6ff 60%, #fff 100%);
            box-shadow: 0 8px 32px rgba(56,182,255,0.15);
            border: none;
            padding: 0;
        }
        #addPetModal .modal-header {
            border-bottom: none;
            background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
            color: #fff;
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
        }
        #addPetModal .modal-title {
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: 1px;
            width: 100%;
        }
        #addPetModal .btn-close {
            background-color: #fff;
            border-radius: 50%;
            opacity: 1;
            box-shadow: 0 2px 8px rgba(56,182,255,0.08);
        }
        #addPetModal .modal-body {
            padding: 2rem 2.5rem 1.5rem 2.5rem;
        }
        #addPetModal .form-label {
            font-weight: 600;
            color: #1976d2;
            margin-bottom: 0.3rem;
        }
        #addPetModal .form-control,
        #addPetModal .form-select {
            border-radius: 0.75rem;
            border: 1.5px solid #b6e0fa;
            background: #fafdff;
            font-size: 1rem;
            margin-bottom: 0.7rem;
            box-shadow: none;
            transition: border-color 0.2s;
        }
        #addPetModal .form-control:focus,
        #addPetModal .form-select:focus {
            border-color: #38b6ff;
            box-shadow: 0 0 0 2px #38b6ff33;
        }
        #addPetModal .select2-container--default .select2-selection--single {
            border-radius: 0.75rem;
            border: 1.5px solid #b6e0fa;
            background: #fafdff;
            height: 38px;
            display: flex;
            align-items: center;
        }
        #addPetModal .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 38px;
        }
        #addPetModal .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 38px;
        }
        #addPetModal .modal-footer {
            border-top: none;
            background: transparent;
            padding-bottom: 2rem;
            padding-top: 0;
        }
        #addPetModal .btn-primary {
            background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
            border: none;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.1rem;
            padding: 0.7rem 2.5rem;
            box-shadow: 0 4px 16px rgba(56,182,255,0.15);
            transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
            letter-spacing: 1px;
        }
        #addPetModal .btn-primary:hover, #addPetModal .btn-primary:focus {
            background: linear-gradient(90deg, #1e90ff 0%, #38b6ff 100%);
            color: #fff;
            box-shadow: 0 6px 24px rgba(56,182,255,0.25);
            transform: translateY(-2px) scale(1.04);
        }

        /* Conversation modal improvements */
#conversationModal .modal-content {
    border-radius: 18px;
    background: linear-gradient(135deg, #e3f6ff 60%, #fff 100%);
    box-shadow: 0 8px 32px rgba(56,182,255,0.15);
    border: none;
    padding: 0;
}

#conversationModal .modal-header {
    border-bottom: none;
    background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
    color: #fff;
    border-top-left-radius: 18px;
    border-top-right-radius: 18px;
    padding-top: 1.2rem;
    padding-bottom: 1.2rem;
}

#conversationModal .modal-title {
    font-weight: 700;
    font-size: 1.2rem;
    letter-spacing: 1px;
}

#conversationModal .modal-body {
    background: #fafdff;
    padding: 1.5rem 1.2rem 1rem 1.2rem;
    min-height: 300px;
    max-height: 400px;
    overflow-y: auto;
}

#conversationModal .modal-footer {
    border-top: none;
    background: #fafdff;
    padding: 1rem 1.2rem;
    border-bottom-left-radius: 18px;
    border-bottom-right-radius: 18px;
}

#conversationModal #messageInput {
    border-radius: 20px;
    border: 1.5px solid #b6e0fa;
    background: #fff;
    font-size: 1rem;
    margin-right: 8px;
    box-shadow: none;
    transition: border-color 0.2s;
}

#conversationModal #sendButton {
    border-radius: 20px;
    background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
    color: #fff;
    font-weight: 700;
    border: none;
    padding: 0.5rem 1.5rem;
    transition: background 0.3s;
}

#conversationModal #sendButton:hover {
    background: linear-gradient(90deg, #1e90ff 0%, #38b6ff 100%);
}

/* MODERN MODAL DESIGN ENHANCEMENTS */
#settingsModal .modal-content,
#commentModal .modal-content,
#petDetailsModal .modal-content,
#addPetModal .modal-content,
#searchModal .modal-content {
  border-radius: 22px;
  background: linear-gradient(135deg, #e3f6ff 60%, #fff 100%);
  box-shadow: 0 8px 32px rgba(56,182,255,0.18), 0 1.5px 8px rgba(0,0,0,0.08);
  border: none;
  padding: 0;
  overflow: hidden;
}
#settingsModal .modal-header,
#commentModal .modal-header,
#petDetailsModal .modal-header,
#addPetModal .modal-header,
#searchModal .modal-header {
  border-bottom: none;
  background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
  color: #fff;
  border-top-left-radius: 22px;
  border-top-right-radius: 22px;
  padding-top: 1.3rem;
  padding-bottom: 1.3rem;
  box-shadow: 0 2px 8px rgba(56,182,255,0.08);
}
#settingsModal .modal-title,
#commentModal .modal-title,
#petDetailsModal .modal-title,
#addPetModal .modal-title,
#searchModal .modal-title {
  font-weight: 700;
  font-size: 1.4rem;
  letter-spacing: 1px;
  margin: 0;
}
#settingsModal .btn-close,
#commentModal .btn-close,
#petDetailsModal .btn-close,
#addPetModal .btn-close,
#searchModal .btn-close {
  background: rgba(255,255,255,0.25);
  border-radius: 50%;
  border: none;
  width: 40px;
  height: 40px;
  position: absolute;
  top: 10px;
  right: 10px;
  transition: background 0.3s;
  box-shadow: 0 2px 8px rgba(56,182,255,0.08);
}
#settingsModal .btn-close:hover,
#commentModal .btn-close:hover,
#petDetailsModal .btn-close:hover,
#addPetModal .btn-close:hover,
#searchModal .btn-close:hover {
  background: rgba(255,255,255,0.4);
}
#settingsModal .modal-body,
#commentModal .modal-body,
#petDetailsModal .modal-body,
#addPetModal .modal-body,
#searchModal .modal-body {
  background: #fafdff;
  padding: 2rem 2.5rem 1.5rem 2.5rem;
  border-bottom-left-radius: 22px;
  border-bottom-right-radius: 22px;
}
#settingsModal .tab-content {
  background: #fafdff;
  border-radius: 1rem;
  border: 1px solid #e0e0e0;
  margin-top: -1px;
  padding: 2rem 1rem 1rem 1rem;
}
#settingsModal .nav-tabs .nav-link.active {
  color: #38b6ff;
  background: #e3f6ff;
  border: none;
  border-bottom: 3px solid #38b6ff;
  font-weight: 700;
  border-radius: 1rem 1rem 0 0;
}
#settingsModal .nav-tabs .nav-link {
  color: #555;
  font-weight: 500;
  transition: color 0.3s, background 0.3s;
  border-radius: 1rem 1rem 0 0;
  margin-right: 2px;
}
#settingsModal .nav-tabs .nav-link:hover {
  color: #38b6ff;
  background: #e3f6ff;
}
#settingsModal .tab-pane {
  min-height: 200px;
}
#settingsModal .card {
  border-radius: 18px;
  background: linear-gradient(135deg, #e3f6ff 60%, #fff 100%);
  border: none;
  box-shadow: 0 4px 16px rgba(56,182,255,0.10);
}
#settingsModal .rounded-circle {
  border: 4px solid #38b6ff22;
  box-shadow: 0 2px 8px rgba(56,182,255,0.08);
}
#settingsModal .fw-bold {
  color: #1976d2;
}
#settingsModal .fw-semibold {
  color: #1976d2;
}
#settingsModal .table {
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
}
#settingsModal .table th {
  background: #e3f6ff;
  color: #1976d2;
  font-weight: 700;
}
#settingsModal .table td {
  background: #fff;
}
#settingsModal .btn-primary, #settingsModal .btn-success, #settingsModal .btn-secondary {
  border-radius: 30px;
  font-weight: 700;
  padding: 0.5rem 2rem;
  box-shadow: 0 2px 8px rgba(56,182,255,0.08);
  border: none;
  transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
}
#settingsModal .btn-primary:hover, #settingsModal .btn-success:hover, #settingsModal .btn-secondary:hover {
  background: linear-gradient(90deg, #1e90ff 0%, #38b6ff 100%);
  color: #fff;
  box-shadow: 0 6px 24px rgba(56,182,255,0.18);
  transform: translateY(-2px) scale(1.04);
}
    </style>

    

</head>
<body>
<div id="loadingScreen" style="display: none;">
        <img src="media/images/utilities/loading.gif" alt="Loading...">
    </div>
    

    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <!-- Brand/Logo -->
            <a class="navbar-brand" href="ownerHome.html">
                <img src="media/images/utilities/pawing.png" alt="Logo" height="40">
            </a>

            <!-- Centered Buttons -->
            <div class="d-flex contentType">
    
            </div>

            <!-- Right-Side Icons -->
            <div class="d-flex">
                <!-- Search Bar Icon -->

                <a href="#" class="nav-link" id="searchIcon">
                    <i class="fas fa-search fa-lg search-icon me-3" ></i>
                </a>

                <!-- Chat Icon -->
                <a href="#" class="nav-link position-relative" id="chatIcon">
                    <i class="fas fa-comments fa-lg"></i>
                    <span id="chatBadge" style="display:inline-block; position:absolute; top:2px; right:2px; background:red; color:white; border-radius:50%; width:18px; height:18px; font-size:12px; text-align:center; line-height:18px;">
                        1
                    </span>
                </a>

                <!-- Notification Icon -->
                <a href="#" id="bellIcon" class="nav-link">
                    <i class="fas fa-bell fa-lg me-3"></i>
                </a>
            </div>
        </div>
    </nav>

    <div id="chatDropdown">
    </div>
    
    <div class="modal fade" id="conversationModal" tabindex="-1" aria-labelledby="conversationModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="conversationModalTitle" class="modal-title">Chat with <span id="userName"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="conversationContent">
                    <!-- Chat content will be dynamically loaded here -->
                </div>
                <div class="modal-footer">
                    <div class="input-group">
                        <input type="text" id="messageInput" class="form-control" placeholder="Type a message...">
                        <button type="button" class="btn btn-primary" id="sendButton">
                        <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <div id="bellDropdown">
        
        <!-- Add more messages as needed -->
    </div>

    <div class="modal fade " id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">  <!-- Changed to extra-large modal -->
            <div class="modal-content">
                
                <!-- Modal Header -->
                <div class="modal-header">
                    <h5 class="modal-title" id="searchModalLabel">Search</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <!-- Modal Body -->
                <div class="modal-body">
                    
                    <!-- Enlarged Search Bar -->
                    <input type="text" id="searchInput" class="form-control mb-4" placeholder="Search for users, pets, or topics...">
                    <div id="searchSuggestions" class="list-group mb-3" style="display:none;"></div>
                    
                    <!-- Recent Searches Title -->
                    <h6 class="mb-3">Recent Searches</h6>
                    
                    <!-- Recent Searches in Two Rows -->
                    <div id="recentSearches" class="row">
                        
                        <!-- Search Item 1 -->
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center border rounded p-2">
                                <img src="media/images/profiles/123.jpg" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                                <div>
                                    <strong>John Doe</strong><br>
                                    <small class="text-muted">New York, USA</small>
                                </div>
                            </div>
                        </div>
    
                        <!-- Search Item 2 -->
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center border rounded p-2">
                                <img src="media/images/profiles/456.jpg" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                                <div>
                                    <strong>Emma Smith</strong><br>
                                    <small class="text-muted">Los Angeles, USA</small>
                                </div>
                            </div>
                        </div>
    
                        <!-- Search Item 3 -->
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center border rounded p-2">
                                <img src="media/images/profiles/789.jpg" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                                <div>
                                    <strong>Oliver Brown</strong><br>
                                    <small class="text-muted">Chicago, USA</small>
                                </div>
                            </div>
                        </div>
    
                        <!-- Search Item 4 -->
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center border rounded p-2">
                                <img src="media/images/profiles/321.jpg" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                                <div>
                                    <strong>Sophia Lee</strong><br>
                                    <small class="text-muted">San Francisco, USA</small>
                                </div>
                            </div>
                        </div>
    
                        <!-- Search Item 5 -->
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center border rounded p-2">
                                <img src="media/images/profiles/654.jpg" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                                <div>
                                    <strong>Michael Green</strong><br>
                                    <small class="text-muted">Houston, USA</small>
                                </div>
                            </div>
                        </div>
    
                        <!-- Search Item 6 -->
                        <div class="col-md-6 col-lg-4 mb-3">
                            <div class="d-flex align-items-center border rounded p-2">
                                <img src="media/images/profiles/987.jpg" alt="Profile" class="rounded-circle me-3" width="50" height="50">
                                <div>
                                    <strong>Emily Davis</strong><br>
                                    <small class="text-muted">Miami, USA</small>
                                </div>
                            </div>
                        </div>
    
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div id="mySidebar" class="sidebar">
        <!-- Top Links -->
        <div class="top-links">
            <a href="ownerHome.html" class="loading-link"><i class="fas fa-home deactive"></i></a>
            <a href="ownerVet.html" class="loading-link"><i class="fas fa-stethoscope deactive"></i></a>
            <a href="ownerCommunity.html" class="loading-link"><i class="fas fa-users deactive"></i></a>
        </div>
    
        <!-- Bottom Icon -->
        <a href="ownerProfile.html" class="bottom-icon pet-item-profile"><img src="" alt="Pet 1" id="sideProfile" class="pet-img-profile me-2"></a>
    </div>
    <div id="main" class="container-fluid">
        <div class="row mainContent">
            <!-- Left Content -->
            <div id="leftContent" class="col-md-2">

            </div>
            <div id="centerContent" class="col-md-7">
                <div id="personalizedContainer">
                    <div class="post-list">
                                

                        <!-- Comment Modal -->
                    </div>
                </div>
            </div>
               
        
        <div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="commentModalLabel">Comments</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="commentModalBody">
                    <!-- Post details and comments will be injected here by JS -->
                </div>
                <div class="modal-footer">
                    <input type="text" class="form-control" id="newCommentInput" placeholder="Write a comment...">
                    <button type="button" class="btn btn-primary" id="submitCommentBtn">Post</button>
                </div>
                </div>
            </div>
        </div>
        
                        

        <style>
            #profile {
                height: 180px; /* Fixed size for a consistent layout */
                width: 180px;
                border-radius: 50%;
                border: 5px solid #f2f2f2;
                margin-top: 20px;
                object-fit: cover; /* Ensures the image scales properly */
            }
        
            .profile-container {
                background-color: #ffffff;
                border: 1px solid #e0e0e0;
                border-radius: 15px;
                padding: 20px;
                margin-top: 20px;
            }
        
            .profile-container h1 {
                font-size: 1.5rem;
                font-weight: bold;
                margin-top: 10px;
            }
        
            .profile-container h3 {
                font-size: 1.2rem;
                margin-bottom: 5px;
                color: #555;
            }
        
            .profile-container p {
                margin: 0;
                font-size: 0.9rem;
                color: #888;
            }
        </style>
        
        <div id="rightSide" class="col-md-3">
            <div id="rightSideContent">
            <!-- Profile Container -->
                <div class="card p-3 profile-container" id="profileContainer" style="border-radius: 15px; background-color: #85d2ff;">
                    <h5 class="petListH5 text-center">Profile Details</h5>
                    <div id="profileDetails" class="profile-details-container">
                        <!-- Profile Picture -->
                        <div class="text-center mb-3">
                            <img src="" id="profile" alt="Profile Picture"
                                class="profile-img-modern shadow"
                                style="width: 110px; height: 110px;">
                        </div>
                        <!-- Profile Details -->
                        <div class="profile-details text-center mb-3">
                            <h2 id="fullName" class="fw-bold mb-1" style="font-size: 1.6rem;">fname + lname</h2>
                            <div class="mb-2">
                                <span class="text-muted small">Email:</span>
                                <div id="email" class="fw-semibold" style="font-size: 1.1rem;">email</div>
                            </div>
                            <div>
                                <span class="text-muted small">Contact No.</span>
                                <div id="contact" class="fw-semibold" style="font-size: 1.1rem;">user contact</div>
                            </div>
                        </div>
                        <!-- Add Pet Button -->
                        <div class="text-center mb-3">
                            <button type="button" class="btn add-pet-btn px-4 py-2" data-bs-toggle="modal" data-bs-target="#addPetModal">
                                <i class="fa fa-paw me-2"></i>Add Pet
                            </button>
                        </div>
                        <!-- Settings and Logout -->
                        <div class="d-flex justify-content-center gap-3 mt-3">
                            <a class="profile-action-btn settings-link" href="#">
                                <i class="fas fa-cog me-2"></i> Settings
                            </a>
                            <a class="profile-action-btn logout-link" id="logOutBtn" href="#">
                                <i class="fas fa-sign-out-alt me-2"></i> Logout
                            </a>
                        </div>
                    </div>
                </div>
                <style>
                    .profile-container {
                        border-radius: 18px !important;
                        background: linear-gradient(135deg, #85d2ff 70%, #fff 100%);
                        border: none;
                        margin: 0 auto;
                        box-shadow: 0 4px 24px rgba(0,0,0,0.08);
                        height: 80px; /* Collapsed height */
                        overflow: hidden; /* Hide content when collapsed */
                        transition: height 0.6s ease; /* Smooth transition for height */
                        border: none;
                    }

                    .profile-container:hover {
                        height: 70%; /* Expanded height on hover */
                    }

                    .profile-details-container {
                        padding: 10px;
                    }
                    .profile-img-modern {
                        border-radius: 50%;
                        border: 4px solid #fff;
                        object-fit: cover;
                        background: #e9ecef;
                        transition: box-shadow 0.2s;
                    }
                    .profile-img-modern:hover {
                        box-shadow: 0 0 0 4px #38b6ff33;
                    }
                    .add-pet-btn {
                        background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
                        color: #fff;
                        font-weight: 700;
                        border: none;
                        border-radius: 30px;
                        box-shadow: 0 4px 16px rgba(56,182,255,0.15);
                        transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
                        letter-spacing: 1px;
                        font-size: 0.8rem;
                    }
                    .add-pet-btn i {
                        font-size: 0.9rem;
                    }
                    .add-pet-btn:hover, .add-pet-btn:focus {
                        background: linear-gradient(90deg, #1e90ff 0%, #38b6ff 100%);
                        color: #fff;
                        box-shadow: 0 6px 24px rgba(56,182,255,0.25);
                        transform: translateY(-2px) scale(1.04);
                    }
                    .settings-link, .logout-link {
                        transition: background 0.2s, color 0.2s;
                        cursor: pointer;
                    }
                    .settings-link:hover {
                        background: #e3f2fd;
                        color: #1976d2 !important;
                        box-shadow: 0 6px 24px rgba(56,182,255,0.25);
                        transform: translateY(-2px) scale(1.04);
                    }
                    .logout-link:hover {
                        background: #ffeaea;
                        color: #d32f2f !important;
                        box-shadow: 0 6px 24px rgba(56,182,255,0.25);
                        transform: translateY(-2px) scale(1.04);
                    } 
                    .profile-action-btn {
                        display: inline-flex;
                        align-items: center;
                        justify-content: center;
                        background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%);
                        color: #fff !important;
                        font-weight: 700;
                        border: none;
                        border-radius: 30px;
                        box-shadow: 0 4px 16px rgba(56,182,255,0.15);
                        transition: background 0.3s, box-shadow 0.3s, transform 0.2s, color 0.2s;
                        letter-spacing: 1px;
                        font-size: 0.8rem;
                        padding: 0.5rem 1.5rem;
                        min-width: 120px;
                        text-decoration: none;
                        margin: 0 2px;
                        cursor: pointer;
                    }
                    .profile-action-btn i {
                        font-size: 1.2rem;
                    }
                    .profile-action-btn:hover, .profile-action-btn:focus {
                        background: linear-gradient(90deg, #1e90ff 0%, #38b6ff 100%);
                        color: #fff !important;
                        box-shadow: 0 6px 24px rgba(56,182,255,0.25);
                        transform: translateY(-2px) scale(1.04);
                        text-decoration: none;
                    }
                    .logout-link {
                        background: linear-gradient(90deg, #ff7675 0%, #ffb199 100%);
                    }
                    .logout-link:hover, .logout-link:focus {
                        background: linear-gradient(90deg, #d32f2f 0%, #ff7675 100%);
                        color: #fff !important;
                    }
                </style>
                
                <div class="pet-profile-container text-center mt-5 card p-3" id="petMateList">
                     <div class="petListH5 mb-2">
                            <h5 class="">Your Pets</h5>
                    </div>
                    <div class="petCollection">
                        <ul class="list-group" id="petList"></ul>
                    </div>
                </div>

                <div class="modal fade" id="petDetailsModal" tabindex="-1" aria-labelledby="petDetailsLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-scrollable">
                        <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="petDetailsLabel">Pet Details</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" id="petDetailsBody">
                            <!-- Pet details will be inserted here -->
                        </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="addPetModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header justify-content-center position-relative">
                            <h5 class="modal-title text-center" id="commentModalLabel">Add a Pet</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="top: 20px; right: 15px; position: absolute;"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="pet_name" class="form-label">Pet Name</label>
                                <input type="text" class="form-control" id="pet_name">
                            </div>
                            <div class="mb-3">
                                <label for="pet_type" class="form-label">Pet Type</label>
                                <select class="form-select select2" id="pet_type" required>
                                    <option value="">Select Type</option>
                                    <!-- Options will be loaded by JS -->
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="pet_breed" class="form-label">Breed</label>
                                <select class="form-select select2" id="pet_breed" required>
                                    <option value="">Select Breed</option>
                                    <!-- Options will be loaded by JS -->
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="pet_birthdate" class="form-label">Birthdate</label>
                                <input type="date" class="form-control" id="pet_birthdate">
                            </div>
                            <div class="mb-3">
                                <label for="pet_gender" class="form-label">Gender</label>
                                <select class="form-select" id="pet_gender">
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                            <!-- <div class="mb-3>
                                <label for="pet_color" class="form-label">Color</label>
                                <input type="text" class="form-control" id="pet_color">
                            </div>
                            <div class="mb-3>
                                <label for="pet_eye_color" class="form-label">Eye Color</label>
                                <input type="text" class="form-control" id="pet_eye_color">
                            </div>
                            <div class="mb-3>
                                <label for="pet_allergies" class="form-label">Allergies</label>
                                <textarea class="form-control" id="pet_allergies" rows="2"></textarea>
                            </div>
                            <div class="mb-3>
                                <label for="pet_medical_conditions" class="form-label">Medical Conditions</label>
                                <textarea class="form-control" id="pet_medical_conditions" rows="2"></textarea>
                            </div>
                            <div class="mb-3>
                                <label for="pet_weight" class="form-label">Weight (kg)</label>
                                <input type="number" class="form-control" id="pet_weight" step="0.01">
                            </div>
                            <div class="mb-3>
                                <label for="pet_size" class="form-label">Size</label>
                                <input type="text" class="form-control" id="pet_size">
                            </div> -->
                            <div class="mb-3">
                                <label for="pet_img" class="form-label">Pet Profile Image</label>
                                <input type="file" class="form-control" id="pet_img" accept="image/*">
                            </div>
                            <div class="mb-3">
                                <label for="pet_vaccine_img" class="form-label">Vaccination Image</label>
                                <input type="file" class="form-control" id="pet_vaccine_img" accept="image/*">
                            </div>
                            
                        </div>
                        <div class="modal-footer justify-content-center">
                            <button type="button" class="btn btn-primary" id="savePetBtn">Done</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

    <!-- Settings Modal -->
<div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-gradient-primary text-white" style="background: linear-gradient(90deg, #38b6ff 0%, #85d2ff 100%); border-top-left-radius: 22px; border-top-right-radius: 22px;">
        <h5 class="modal-title d-flex align-items-center gap-2" id="settingsModalLabel"><i class="fas fa-cog me-2"></i>Settings</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <ul class="nav nav-tabs mb-3 justify-content-center" id="settingsTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active settings-tab px-4 py-2" id="account-info-tab" data-bs-toggle="tab" data-tab="account-info" type="button" role="tab"><i class="fas fa-user me-1"></i>Account Info</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link settings-tab px-4 py-2" id="activity-log-tab" data-bs-toggle="tab" data-tab="activity-log" type="button" role="tab"><i class="fas fa-list-alt me-1"></i>Activity Log</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link settings-tab px-4 py-2" id="pet-info-tab" data-bs-toggle="tab" data-tab="pet-info" type="button" role="tab"><i class="fas fa-paw me-1"></i>Pet Info</button>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade show active settings-tab-content" id="settingsAccountInfo" role="tabpanel">
            <div class="row justify-content-center align-items-center g-4">
              <div class="col-md-4 text-center mb-3">
                <div class="position-relative d-inline-block">
                  <img id="settingsProfileImg" src="media/images/default-profile.png" class="rounded-circle mb-3 shadow" style="width:120px;height:120px;object-fit:cover;border:4px solid #38b6ff22;box-shadow:0 2px 8px rgba(56,182,255,0.08);">
                  <span class="position-absolute bottom-0 end-0 translate-middle p-2 bg-success border border-light rounded-circle" style="width:28px;height:28px;">
                    <i class="fas fa-check text-white"></i>
                  </span>
                </div>
              </div>
              <div class="col-md-8">
                <h4 class="fw-bold mb-2" id="settingsFullName">Full Name</h4>
                <div class="mb-2 d-flex align-items-center gap-2">
                  <i class="fas fa-envelope text-primary"></i>
                  <span id="settingsEmail" class="fw-semibold">Email</span>
                </div>
                <div class="mb-2 d-flex align-items-center gap-2">
                  <i class="fas fa-phone text-primary"></i>
                  <span id="settingsContact" class="fw-semibold">Contact</span>
                </div>
                <div class="mb-2 d-flex align-items-center gap-2">
                  <i class="fas fa-map-marker-alt text-danger"></i>
                  <span class="text-muted small">Location:</span>
                  <span class="fw-semibold ms-2" id="settingsLocation">Not set</span>
                  <button class="btn btn-outline-primary btn-sm ms-2" id="setLocationBtn" title="Add Location"><i class="fas fa-map-marker-alt"></i> Add Location</button>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade settings-tab-content" id="settingsActivityLog" role="tabpanel" style="display:none;">
            <div class="text-center text-muted">Loading activity log...</div>
          </div>
          <div class="tab-pane fade settings-tab-content" id="settingsPetInfo" role="tabpanel" style="display:none;">
            <div class="text-center text-muted" id="settingsPetInfoLoading">Loading pet info...</div>
            <div id="settingsPetInfoList" class="row g-3 mt-2"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End Settings Modal -->

<!-- Google Maps Location Modal -->
<div class="modal fade" id="locationMapModal" tabindex="-1" aria-labelledby="locationMapModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="locationMapModalLabel">Select Your Location</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="googleMap" style="width: 100%; height: 400px;"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="saveLocationBtn">Save Location</button>
      </div>
    </div>
  </div>
</div>
<!-- Google Maps API (replace YOUR_API_KEY with your actual key) -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNwLkQpUFsUSpxq1dbw-_VqWsy2PQaU9Q"></script>
    

  
    <!-- AJAX link -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="jsFile/globalSide/getSessionInfo.js"></script>
    <script src="jsFile/userSide/ownerProfile.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
    // JS for the loading page
    function showLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'flex';
        }

        function hideLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'none';
        }

        window.addEventListener('load', hideLoadingScreen);

        window.addEventListener('beforeunload', showLoadingScreen);

        $(document).ready(function() {
            $('#personalizedButton').click(function() {
                $('#personalizedContainer').removeClass('hidden');
                $('#publicContainer').addClass('hidden');
                $(this).addClass('contentTypeButtonActive').removeClass('contentTypeButtonDeactive');
                $('#publicButton').addClass('contentTypeButtonDeactive').removeClass('contentTypeButtonActive');
            });

            $('#publicButton').click(function() {
                $('#publicContainer').removeClass('hidden');
                $('#personalizedContainer').addClass('hidden');
                $(this).addClass('contentTypeButtonActive').removeClass('contentTypeButtonDeactive');
                $('#personalizedButton').addClass('contentTypeButtonDeactive').removeClass('contentTypeButtonActive');
            });
        });

        $('#chatIcon').click(function() {
            $('#chatDropdown').toggle();
        });

        // Close the dropdown if clicked outside
        $(document).click(function(event) {
            if (!$(event.target).closest('#chatIcon, #chatDropdown').length) {
                $('#chatDropdown').hide();
            }
        });

        $('#bellIcon').click(function() {
            $('#bellDropdown').toggle();
        });

        // Close the dropdown if clicked outside
        $(document).click(function(event) {
            if (!$(event.target).closest('#bellIcon, #bellDropdown').length) {
                $('#bellDropdown').hide();
            }
        });

        // $(document).ajaxStart(function() {
        //     showLoadingScreen();
        // });

        // $(document).ajaxComplete(function() {
        //     hideLoadingScreen();
        // });

        // $('form').on('submit', function() {
        //     showLoadingScreen();
        // });

        // Apply the loading screen to links with the loading-link class
        document.querySelectorAll('a.loading-link').forEach(function(anchor) {
            anchor.addEventListener('click', function() {
                showLoadingScreen();
            });
        });

        document.querySelectorAll('.chat-message').forEach(message => {
            message.addEventListener('click', function () {
                const userName = this.getAttribute('data-user');
                const userMessage = this.getAttribute('data-text');
        
                // Update modal content
                document.getElementById('userName').textContent = userName;
                document.getElementById('conversationContent').innerHTML = `
                    <div class="d-flex align-items-start mb-3">
                        <img src="media/images/default-profile.png" class="rounded-circle me-2" width="40" height="40" alt="${userName}">
                        <div class="bg-light p-2 rounded">
                            <strong>${userName}:</strong> ${userMessage}
                        </div>
                    </div>
                    <div class="d-flex align-items-start justify-content-end mb-3">
                        <div class="bg-primary text-white p-2 rounded">
                            <strong>You:</strong> Sure! Let me check.
                        </div>
                    </div>
                `;
        
                // Show modal
                const conversationModal = new bootstrap.Modal(document.getElementById('conversationModal'));
                conversationModal.show();
            });
        });
        
        function filterCategories() {
            const searchInput = document.getElementById("categorySearch").value.toLowerCase();
            const items = document.querySelectorAll(".category-item");
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchInput)) {
                    item.style.display = "block";
                } else {
                    item.style.display = "none";
                }
            });
        }

        document.querySelectorAll('.chat-item').forEach(item => {
            item.addEventListener('click', function () {
                const customerName = this.getAttribute('data-customer');
                const lastMessage = this.getAttribute('data-message');

                // Set modal title and load chat content
                document.getElementById('customerName').textContent = customerName;
                document.getElementById('chatContent').innerHTML = `
                    <div class="d-flex align-items-start mb-3">
                        <img src="media/images/default-profile.png" class="rounded-circle me-2" width="40" height="40" alt="${customerName}">
                        <div class="bg-light p-2 rounded">
                            <strong>${customerName}:</strong> ${lastMessage}
                        </div>
                    </div>
                    <div class="d-flex align-items-start justify-content-end mb-3">
                        <div class="bg-primary text-white p-2 rounded">
                            <strong>You:</strong> Sure! Let me check.
                        </div>
                    </div>
                `;

                // Initialize modals
                const viewChatModalElement = document.getElementById('viewChat');
                const chatModalElement = document.getElementById('chatModal');

                const viewChatModal = bootstrap.Modal.getInstance(viewChatModalElement) || new bootstrap.Modal(viewChatModalElement);
                const chatModal = bootstrap.Modal.getInstance(chatModalElement) || new bootstrap.Modal(chatModalElement);

                // Hide the viewChat modal and show the chatModal
                viewChatModal.hide();
                chatModal.show();
            });
        });

        $('#viewChatsButton').on('click', function () {
            const viewChatModalElement = document.getElementById('viewChat');
            const viewChatModal = bootstrap.Modal.getInstance(viewChatModalElement) || new bootstrap.Modal(viewChatModalElement);
            viewChatModal.show();
        });

        // JS for the Side Bar ------------------------------------------------------

        // Pet Type and Breed Selection
        $(document).ready(function() {
            // Fetch all pet types and breeds from the new PHP endpoint
            $.getJSON('phpFile/globalSide/getPetTypesBreeds.php', function(data) {
                // Store the breeds for each type in a JS object for quick lookup
                let typeBreedsMap = {};
                $('#pet_type').empty().append('<option value="">Select Type</option>');
                data.forEach(function(item) {
                    $('#pet_type').append(`<option value="${item.id}">${item.pet_type}</option>`);
                    typeBreedsMap[item.id] = item.pet_breeds; // pet_breeds is an array

                });

                // When pet type changes, update breeds dropdown
                $('#pet_type').on('change', function() {

                    let selectedId = $(this).val();
                    $('#pet_breed').empty().append('<option value="">Select Breed</option>');
                    if (selectedId && typeBreedsMap[selectedId]) {
                        typeBreedsMap[selectedId].forEach(function(breed) {
                            $('#pet_breed').append(`<option value="${breed}">${breed}</option>`);
                        });
                    }
                    $('#pet_breed').trigger('change.select2');
                });
            });

            // Initialize Select2 for both dropdowns
            $('#pet_type').select2({
                dropdownParent: $('#addPetModal'),
                width: '100%',
                placeholder: "Select Type"
            });
            $('#pet_breed').select2({
                dropdownParent: $('#addPetModal'),
                width: '100%',
                placeholder: "Select Breed",
                language: {
                    noResults: function(params) {
                        // If no pet type is selected, show custom message
                        if (!$('#pet_type').val()) {
                            return "Select your Pet Type first";
                        }
                        return "No results found";
                    }
                }
            });
        });

        

        let currentChatUserId = null;

        var sessionUserId = null;
        $.getJSON('phpFile/globalSide/getSessionInfo.php', function(response) {
            if (response.status === "success" && response.data.user_id) {
                sessionUserId = response.data.user_id;
                loadChats();
            } else {
                alert("Not logged in or session error.");
            }
        });
        let chatListInterval = null;
        let conversationInterval = null;
        let isConversationOpen = false;

        function loadChats() {
            $.get('phpFile/globalSide/getChats.php', function(data) {
                let users = data;
                if (typeof data === "string") {
                    try {
                        users = JSON.parse(data);
                    } catch (e) {
                        users = [];
                    }
                }
                let html = `
                    <div class="px-3 pt-3 pb-2">
                        <h5 class="fw-bold mb-0" style="color:#1976d2;">Chats</h5>
                    </div>
                    <hr class="my-0">
                `;
                let hasUnread = false; // Track if any chat has unread messages
                let unreadTotal = 0;
                users.forEach(user => {
                    if (user.unread_count && user.unread_count > 0) {
                        hasUnread = true;
                        unreadTotal += user.unread_count;
                    }
                    html += `
                        <div class="chat-message" data-user-id="${user.id}" data-user-name="${user.name}">
                            <img class="profile-img" src="${user.profile_img || 'media/images/profiles/default.jpg'}" alt="Profile Picture">
                            <div class="message-details">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="name">${user.name}</span>
                                    <span class="time">${user.sent_at || ''}</span>
                                </div>
                                <span class="message">${user.last_message || ''}</span>
                            </div>
                        </div>
                    `;
                });
                $('#chatDropdown').html(html);

                // Show or hide the badge
                if (hasUnread) {
                    $('#chatBadge').text(unreadTotal).show();
                } else {
                    $('#chatBadge').hide();
                }
                // Add click event to open chat modal
               $('.chat-message').click(function() {
                currentChatUserId = $(this).data('user-id');
                $('#userName').text($(this).data('user-name'));
                loadMessages(currentChatUserId);

                // Mark messages as read for this conversation
                $.post('phpFile/globalSide/markMessageRead.php', { other_user_id: currentChatUserId }, function(res) {
                    loadChats(); // Refresh badge after marking as read
                });

                // Stop chat list polling when modal is open
                if (chatListInterval) clearInterval(chatListInterval);

                // Start conversation polling
                if (conversationInterval) clearInterval(conversationInterval);
                               conversationInterval = setInterval(function() {
                    loadMessages(currentChatUserId);
                }, 2000);

                isConversationOpen = true;
                const conversationModal = new bootstrap.Modal(document.getElementById('conversationModal'));
                conversationModal.show();
            });
            }).fail(function(jqXHR, textStatus, errorThrown) {
                $('#chatDropdown').html('<div class="text-danger text-center py-4">Failed to load chats.</div>');
            });
        }

        // Start polling chat list every 5 seconds (when modal is closed)
        function startChatListPolling() {
            if (chatListInterval) clearInterval(chatListInterval);
            chatListInterval = setInterval(function() {
                if (!isConversationOpen) loadChats();
            }, 3000);
        }

        // Stop conversation polling and resume chat list polling when modal closes
        $('#conversationModal').on('hidden.bs.modal', function () {
            if (conversationInterval) clearInterval(conversationInterval);
            isConversationOpen = false;
            startChatListPolling();
        });

        // Initial load and polling
        $(document).ready(function() {
            loadChats();
            startChatListPolling();
        });

        document.getElementById('searchIcon').addEventListener('click', function () {
            const searchModal = new bootstrap.Modal(document.getElementById('searchModal'));
            searchModal.show();
        });



        // Load messages for a given user
        function loadMessages(userId) {
            $.get('phpFile/globalSide/getConversation.php', { user_id: userId }, function(data) {
                let messages = data;
                if (typeof data === "string") {
                    try {
                        messages = JSON.parse(data);
                    } catch (e) {
                        messages = [];
                    }
                }

                let html = '';
                messages.forEach(msg => {
                    const isMe = msg.sender_id == sessionUserId;
                    html += `
                        <div class="d-flex ${isMe ? 'justify-content-end' : 'justify-content-start'} mb-2">
                            <div class="${isMe ? 'bg-primary text-white' : 'bg-light'} p-2 rounded shadow-sm" style="max-width:70%;">
                                <strong>${isMe ? 'You' : msg.user_fname + ' ' + msg.user_lname}:</strong>
                                ${msg.message}
                                <div class="small text-muted text-end">${msg.sent_at}</div>
                            </div>
                        </div>
                    `;
                });

                const $conversation = $('#conversationContent');
                $conversation.html(html || '<div class="text-center text-muted">No messages yet.</div>');

                //  Scroll to bottom after loading messages
                $conversation.scrollTop($conversation[0].scrollHeight);
                });
        }

        // When opening the chat modal
        $('.chat-message').click(function() {
            currentChatUserId = $(this).data('user-id');
            $('#userName').text($(this).data('user-name'));

            loadMessages(currentChatUserId);

            // Start polling every 2 seconds
            if (conversationInterval) clearInterval(conversationInterval);
            conversationInterval = setInterval(function() {
                loadMessages(currentChatUserId);
            }, 2000); // Changed to 2000ms (2s) from 300ms to avoid spamming server

            const conversationModal = new bootstrap.Modal(document.getElementById('conversationModal'));
            conversationModal.show();
        });

        // Scroll to bottom again when modal is fully shown (optional, but safe)
        $('#conversationModal').on('shown.bs.modal', function () {
            const $conversation = $('#conversationContent');
            $conversation.scrollTop($conversation[0].scrollHeight);
        });

        // Stop polling when modal closes
        $('#conversationModal').on('hidden.bs.modal', function () {
            if (conversationInterval) clearInterval(conversationInterval);
            conversationInterval = null;
            currentChatUserId = null;
        });

        // Send message on button click
        $('#sendButton').click(function() {
            const message = $('#messageInput').val().trim();
            if (!message || !currentChatUserId) return;

            $.post('phpFile/globalSide/sendMessage.php', {
                receiver_id: currentChatUserId,
                message: message
            }, function(response) {
                $('#messageInput').val('');
                loadMessages(currentChatUserId); // Refresh conversation
                loadChats(); // Optional: refresh sidebar/chat list
            }, 'json');
        });

        // Optional: Send on Enter key
        $('#messageInput').keypress(function(e) {
            if (e.which === 13) {
                $('#sendButton').click();
                return false;
            }
        });

        $(document).ready(function() {
            $('#chatBadge').show().text('1');
        });

        // Load pet info in settings modal
        function loadSettingsPetInfo() {
  $('#settingsPetInfoLoading').show();
  $('#settingsPetInfoList').empty();
  $.get('phpFile/globalSide/fetchUserPets.php', function(res) {
    $('#settingsPetInfoLoading').hide();
    if (res.status === 'success' && Array.isArray(res.pets) && res.pets.length > 0) {
      let html = '';
      res.pets.forEach(function(pet) {
        const img = pet.pet_img ? `media/images/petPics/${pet.pet_img}` : 'media/images/default-profile.png';
        html += `
        <div class="col-md-6 col-lg-4">
          <div class="card shadow-sm h-100">
            <img src="${img}" class="card-img-top" alt="${pet.pet_name}" style="height:140px;object-fit:cover;">
            <div class="card-body">
              <h5 class="card-title mb-1">${pet.pet_name}</h5>
              <div class="mb-1"><strong>Type:</strong> ${pet.pet_type || ''}</div>
              <div class="mb-1"><strong>Breed:</strong> ${pet.pet_breed || ''}</div>
              <div class="mb-1"><strong>Birthdate:</strong> ${pet.pet_birthdate || ''}</div>
              <div class="mb-1"><strong>Gender:</strong> ${pet.pet_gender || ''}</div>
              <div class="mb-1"><strong>Color:</strong> ${pet.pet_color || ''}</div>
              <div class="mb-1"><strong>Weight:</strong> ${pet.pet_weight || ''} kg</div>
            </div>
          </div>
        </div>
        `;
      });
      $('#settingsPetInfoList').html(html);
    } else {
      $('#settingsPetInfoList').html('<div class="text-muted text-center">No pets found.</div>');
    }
  }, 'json');
}

        // Load pet info when the tab is opened
        $('#pet-info-tab').on('click', function() {
            loadSettingsPetInfo();
        });
    </script>
</body>
</html>